#!/bin/bash

echo "üè† Mini Sweet Home Installation"
echo "================================"

DOTFILES_DIR="$HOME/mini-sweet-home"

echo "üêä Setting ZSH as default shell..."
if [[ "$SHELL" != */zsh ]]; then
    if command -v zsh >/dev/null 2>&1; then
        echo "Changing shell to ZSH..."
        chsh -s $(which zsh)
        echo "‚úÖ Shell changed to ZSH (restart terminal to apply)"
    else
        echo "‚ö†Ô∏è ZSH not found, please install it first"
        echo "Ubuntu/Debian: sudo apt install zsh"
        echo "macOS: brew install zsh"
        exit 1
    fi
else
    echo "‚úÖ ZSH already default shell"
fi

echo "üìÅ Creating symlinks..."

# ZSH
rm -f ~/.zshrc
ln -sf "$DOTFILES_DIR/configs/shell/zsh/zshrc" ~/.zshrc
echo "‚úÖ Linked: ~/.zshrc"

# Tmux  
rm -f ~/.tmux.conf
ln -sf "$DOTFILES_DIR/configs/tmux/tmux.conf" ~/.tmux.conf
echo "‚úÖ Linked: ~/.tmux.conf"

# Git
rm -f ~/.gitconfig
ln -sf "$DOTFILES_DIR/configs/git/gitconfig" ~/.gitconfig
echo "‚úÖ Linked: ~/.gitconfig"

# Neovim
mkdir -p ~/.config
rm -rf ~/.config/nvim
ln -sf "$DOTFILES_DIR/configs/nvim" ~/.config/nvim
echo "‚úÖ Linked: ~/.config/nvim"

# Cache
mkdir -p ~/.cache/zsh

echo "üéâ Installation complete!"
echo "Run: exec zsh  (to start ZSH immediately)"
echo "Or restart terminal for permanent ZSH"
