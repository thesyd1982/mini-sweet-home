#!/bin/bash

# ==========================================
# ğŸ¯ DÃ‰MONSTRATION DE DUST
# ==========================================
# Usage: ./dust-demo
# Description: DÃ©monstration interactive des capacitÃ©s de dust

set -euo pipefail

# Couleurs
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
CYAN='\033[0;36m'
NC='\033[0m'

log() { echo -e "${BLUE}[INFO]${NC} $1"; }
demo() { echo -e "${CYAN}[DEMO]${NC} $1"; }
cmd() { echo -e "${YELLOW}$ $1${NC}"; }
success() { echo -e "${GREEN}[âœ“]${NC} $1"; }

# VÃ©rifier que dust est installÃ©
if ! command -v dust >/dev/null 2>&1; then
    echo "âŒ dust n'est pas installÃ©"
    echo "ğŸ’¡ Installez-le avec: make dust ou make rust-full"
    exit 1
fi

clear
echo "ğŸ¯ DÃ©monstration de dust - Analyseur d'espace disque moderne"
echo "============================================================"
echo ""

demo "Version de dust installÃ©e :"
dust --version
echo ""

demo "1. Analyse basique du rÃ©pertoire actuel"
cmd "dust"
dust
echo ""

read -p "Appuyez sur EntrÃ©e pour continuer..."
clear

demo "2. Analyse avec limitation de profondeur"
cmd "dust -d 2"
dust -d 2
echo ""

read -p "Appuyez sur EntrÃ©e pour continuer..."
clear

demo "3. Top 5 des plus gros Ã©lÃ©ments"
cmd "dust -n 5"
dust -n 5
echo ""

read -p "Appuyez sur EntrÃ©e pour continuer..."
clear

demo "4. Ordre inversÃ© (plus gros en premier)"
cmd "dust -r -n 5"
dust -r -n 5
echo ""

read -p "Appuyez sur EntrÃ©e pour continuer..."
clear

demo "5. Analyse du rÃ©pertoire home (limitÃ©)"
cmd "dust -d 3 -n 10 ~"
dust -d 3 -n 10 ~
echo ""

read -p "Appuyez sur EntrÃ©e pour continuer..."
clear

demo "6. Format de sortie en arbre"
cmd "dust -t -d 2"
dust -t -d 2
echo ""

read -p "Appuyez sur EntrÃ©e pour continuer..."
clear

demo "7. Comparaison avec 'du' traditionnel"
echo "Temps d'exÃ©cution avec dust :"
cmd "time dust -d 2 >/dev/null"
time dust -d 2 >/dev/null

echo ""
echo "Temps d'exÃ©cution avec du traditionnel :"
cmd "time du -h --max-depth=2 . 2>/dev/null | sort -hr | head -10"
time du -h --max-depth=2 . 2>/dev/null | sort -hr | head -10

echo ""
read -p "Appuyez sur EntrÃ©e pour continuer..."
clear

demo "8. Options avancÃ©es disponibles"
echo "Voici toutes les options de dust :"
dust --help

echo ""
echo "ğŸ‰ Fin de la dÃ©monstration !"
echo ""
echo "ğŸ’¡ Commandes utiles Ã  retenir :"
echo "   dust                    # Analyse basique"
echo "   dust -d 3              # Profondeur limitÃ©e"
echo "   dust -n 10             # Top 10"
echo "   dust -r                # Ordre inversÃ©"
echo "   dust -x                # MÃªme systÃ¨me de fichiers"
echo "   dust /path/specific    # Analyser un chemin spÃ©cifique"
echo ""
echo "ğŸ“š Pour plus d'infos : ~/mini-sweet-home/docs/rust-installation-guide.md"
