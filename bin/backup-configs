#!/bin/bash

# ===============================
# 💾 BACKUP CONFIGS V4
# ===============================

BACKUP_DIR="$HOME/.dotfiles_manual_backup_$(date +%Y%m%d_%H%M%S)"

echo "🚀 Sauvegarde des configurations..."

mkdir -p "$BACKUP_DIR"

# Configurations à sauvegarder
configs=(
    ".zshrc"
    ".tmux.conf" 
    ".gitconfig"
    ".config/nvim"
    ".ssh/config"
    ".aws"
    ".docker"
)

backed_up=0

for config in "${configs[@]}"; do
    if [[ -e "$HOME/$config" ]]; then
        cp -r "$HOME/$config" "$BACKUP_DIR/" 2>/dev/null || true
        echo "✅ Sauvegardé: $config"
        ((backed_up++))
    fi
done

# Sauvegarder les dotfiles eux-mêmes
if [[ -d "$HOME/dotfiles" ]]; then
    cp -r "$HOME/dotfiles" "$BACKUP_DIR/dotfiles_copy" 2>/dev/null || true
    echo "✅ Sauvegardé: dotfiles/"
    ((backed_up++))
fi

echo
echo "📁 Sauvegarde terminée: $BACKUP_DIR"
echo "📊 Fichiers sauvegardés: $backed_up"
echo
echo "Pour restaurer:"
echo "  cp -r $BACKUP_DIR/.zshrc ~/"
echo "  cp -r $BACKUP_DIR/.tmux.conf ~/"
echo "  # etc..."
